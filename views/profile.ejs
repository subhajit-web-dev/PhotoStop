<% include ./partials/header.ejs %> 

    <div class="profile w-full min-h-full bg-zinc-800 text-white pt-1">
        <% include ./partials/nav.ejs %> 
            <div class="w-full h-full px-11 py-8">
                <form hidden id="uploadform" action="/fileupload" method="post" enctype="multipart/form-data">
                    <input type="file" name="image">
                </form>
                <div class="profdets mt-8 flex flex-col items-center justify-center">
                    <div class="relative">
                        <span id="uploaddp" class="w-7 h-7 absolute bottom-0 right-0 rounded-full flex items-center justify-center bg-zinc-200">
                            <i class="ri-pencil-fill text-zinc-800"></i>
                        </span>
                        <div class="w-32 h-32 border-2	 bg-zinc-200 rounded-full overflow-hidden">
                            <img class="w-full h-full object-cover " 
                            src="/images/uploads/<%= user.profileImage %>" alt="profile_image">
                        </div>
                    </div>
                    <h1 class="text-2xl font-semibold mt-2"><%= user.fullname %></h1>
                    <h3 class="text-lg">@<%= user.username %></h3>
                    <a href="/edit" class="mt-3 px-5 py-3 text-xs tracking-widest font-semibold bg-zinc-700 rounded-full">Edit profile</a>
                    <a href="/add" class="px-8 py-2 text-sm tracking-widest font-semibold rounded-full bg-red-700 mt-7">New post</a>
                </div>
                
                <!-- old card/gallery code -->

                <!-- <div class="container flex flex-wrap gap-10 px-11 mt-20">
                    <% user.posts.forEach(function(post){ %>
                    <div class="card image-container">
                        
                        <div class="image w-96 h-80 bg-zinc-200 rounded-xl overflow-hidden">
                            <img class="zoomable w-full h-full object-cover" 
                            src="/images/uploads/<%= post.image %>" alt="Naruto">
                        </div>
                        <div>
                            <h3 class="text-base tracking-wider font-semibold mt-3"><%= post.title %></h3>
                            <p class="w-44 h-auto text-sm font-medium opacity-80 text-wrap overflow-hidden"><%= post.description %></p>
                        </div>
                        
                    </div>

                    <% }) %>
                </div> -->

                <div class="container">
                    <% user.posts.forEach(function(post){ %>
                    <div class="box">
                        <a href="/images/uploads/<%= post.image %>" data-lightbox="posts" data-title="<%= post.description %>">
                            <img src="/images/uploads/<%= post.image %>" alt="image">
                        </a>
                        <h3 class="text-base tracking-wider font-semibold mt-3"><%= post.title %></h3>
                    </div> 
                    <% }) %>
                </div>
                
            </div>
    </div>

    <script src="/javascripts/lightbox-plus-jquery.js"></script>

    <script>        
        document.querySelector("#uploaddp").addEventListener("click", function(){
            document.querySelector("#uploadform input").click();
        })

        document.querySelector("#uploadform input").addEventListener("change", function(){
            document.querySelector("#uploadform").submit();
        })        
    </script>

<% include ./partials/footer.ejs %>

